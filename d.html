<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>순천시 병원 찾기</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }
        .table-container {
            max-height: 80vh;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        th, td {
            padding: 12px 16px;
            text-align: left;
            white-space: nowrap;
        }
        th {
            background-color: #e5e7eb;
            font-weight: 600;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        tr:nth-child(even) {
            background-color: #f9fafb;
        }
    </style>
</head>
<body class="p-4 md:p-8 lg:p-12">
    <div class="max-w-6xl mx-auto bg-white rounded-xl shadow-lg p-6 md:p-8 lg:p-10">
        <header class="text-center mb-6 md:mb-8">
            <h1 class="text-2xl sm:text-3xl md:text-4xl font-bold text-gray-800 mb-2">
                전라남도 순천시 병원 현황
            </h1>
            <p class="mt-2 text-gray-600 text-sm sm:text-base">
                필터와 검색을 이용해 원하는 의료기관을 찾아보세요.
            </p>
        </header>

        <main>
            <!-- 검색 및 필터 영역 -->
            <div class="flex flex-col sm:flex-row sm:space-x-4 space-y-4 sm:space-y-0 mb-6">
                <input type="text" id="search-input" placeholder="의료기관명, 주소, 전화번호로 검색..." 
                       class="flex-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">
                
                <select id="type-filter" class="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="">전체 구분</option>
                </select>
                
                <select id="neighborhood-filter" class="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="">전체 동</option>
                </select>
            </div>
            
            <div class="flex justify-between items-center mb-4 text-sm sm:text-base text-gray-600">
                <span id="result-count">총 0개 결과</span>
            </div>
            
            <!-- 테이블 영역 -->
            <div class="table-container border border-gray-200 rounded-lg shadow-sm">
                <table class="w-full text-sm sm:text-base">
                    <thead>
                        <tr class="text-gray-700">
                            <th class="rounded-tl-lg">구분</th>
                            <th>의료기관명</th>
                            <th>의료기관주소(도로명)</th>
                            <th class="rounded-tr-lg">의료기관전화번호</th>
                        </tr>
                    </thead>
                    <tbody id="hospital-table-body"></tbody>
                </table>
            </div>
        </main>
        
        <footer class="mt-8 text-center text-xs sm:text-sm text-gray-500">
            데이터는 2021년 9월 1일 기준입니다.
        </footer>
    </div>

    <script>
        const csvContent = `"구분","의료기관명","의료기관주소(도로명)","의료기관전화번호"
"한의원","담뜰한의원","전라남도 순천시 왕지로 36, 2층 203호 (왕지동)","061-762-7577"
"한의원","하얀미한의원","전라남도 순천시 왕지4길 9-12, 2층 (왕지동)",""
"한의원","송인한의원","전라남도 순천시 중앙로 75, 1층 (저전동)","061-753-2735"
"한의원","홍대영한의원","전라남도 순천시 중앙로 146-1, 1층 (매곡동)","061-751-1075"
"한의원","지리산쌍계한의원","전라남도 순천시 왕지2길 13-7, 2층 (왕지동)","061-721-0012"
"한의원","아이누리한의원","전라남도 순천시 해룡면 매안로 145, 2층 202호","061-723-0275"
"한의원","산들한의원","전라남도 순천시 삼산로 101, 2층 203호 (용당동, 주상복합)","061-753-3701"
"한의원","웃장부부한의원","전라남도 순천시 중앙로 234, 1층 (장천동)","061-742-0123"
"한의원","조례동부부한의원","전라남도 순천시 조례못등길 15, 201호 (조례동)","061-722-1075"
"한의원","강은하한의원","전라남도 순천시 충효로 68, 2층 (조례동)","061-722-1050"
"한의원","대송한의원","전라남도 순천시 연향번영길 100, 2층 (연향동)","061-722-2252"
"한의원","우리동네한의원","전라남도 순천시 연향번영길 124, 2층 (연향동)","061-722-2615"
"한의원","백제한의원","전라남도 순천시 연향번영길 130, 203호 (연향동)","061-722-5200"
"한의원","강민규한의원","전라남도 순천시 연향번영길 156, 1층 (연향동)","061-723-1075"
"한의원","김선태한의원","전라남도 순천시 연향번영길 174, 2층 (연향동)","061-723-8875"
"한의원","우리들한의원","전라남도 순천시 연향번영1길 22, 1층 (연향동)","061-725-7004"
"한의원","순천제일한의원","전라남도 순천시 남신월길 5-11, 2층 (풍덕동)","061-746-1075"
"한의원","태광한의원","전라남도 순천시 팔마로 24, 2층 (풍덕동)","061-744-1075"
"한의원","대우한의원","전라남도 순천시 남신월1길 26, 2층 (풍덕동)","061-745-1075"
"한의원","풍덕한의원","전라남도 순천시 조례못등길 23, 101호 (조례동)","061-725-2884"
"한의원","수아수한의원","전라남도 순천시 조례못등길 43, 2층 (조례동)","061-727-2175"
"한의원","강동한의원","전라남도 순천시 삼산로 38, 2층 (저전동)","061-754-0075"
"한의원","김수한의원","전라남도 순천시 삼산로 115, 2층 (용당동)","061-753-1075"
"한의원","김영은한의원","전라남도 순천시 삼산로 133, 2층 (용당동)","061-755-1075"
"한의원","우리한의원","전라남도 순천시 삼산로 149, 2층 (용당동)","061-751-1075"
"한의원","하나한의원","전라남도 순천시 삼산로 189, 2층 (연향동)","061-722-1075"
"한의원","강신용한의원","전라남도 순천시 삼산로 225, 2층 (연향동)","061-723-1075"
"한의원","대지한의원","전라남도 순천시 충효로 135, 2층 (조례동)","061-725-3330"
"한의원","정문한의원","전라남도 순천시 충효로 151, 1층 (조례동)","061-725-3375"
"한의원","미르한의원","전라남도 순천시 삼산로 379, 1층 (연향동)","061-725-6375"
"한의원","김상철한의원","전라남도 순천시 삼산로 402, 2층 (조례동)","061-722-7775"
"한의원","순천푸른한의원","전라남도 순천시 남신월1길 28, 2층 (풍덕동)","061-743-1075"
"한의원","한사랑한의원","전라남도 순천시 충효로 123, 2층 (조례동)","061-725-1075"
"한의원","강경한의원","전라남도 순천시 연향번영1길 2, 2층 (연향동)","061-722-1002"
"한의원","유명한의원","전라남도 순천시 연향3로 16, 2층 (연향동)","061-721-1075"
"한의원","동신한의원","전라남도 순천시 연향3로 5, 2층 (연향동)","061-723-1075"
"한의원","이재한한의원","전라남도 순천시 연향2로 11, 2층 (연향동)","061-722-1075"
"한의원","광영한의원","전라남도 순천시 왕궁길 53, 2층 (조례동)","061-722-1004"
"한의원","자연한의원","전라남도 순천시 팔마로 241, 1층 (조례동)","061-723-7521"
"한의원","최명규한의원","전라남도 순천시 팔마로 253, 2층 (조례동)","061-722-1075"
"한의원","늘푸른한의원","전라남도 순천시 팔마로 280, 2층 (조례동)","061-721-7500"
"한의원","김병기한의원","전라남도 순천시 순광로 316, 2층 (연향동)","061-724-1075"
"한의원","순천하나한의원","전라남도 순천시 해룡면 신대1길 6, 301호 (신대리)","061-721-7522"
"한의원","정문환한의원","전라남도 순천시 왕지로 42-1, 2층 (왕지동)","061-725-1075"
"한의원","연세한의원","전라남도 순천시 매곡1길 27, 2층 (매곡동)","061-753-1075"
"한의원","김승희한의원","전라남도 순천시 순광로 122, 2층 (장천동)","061-745-1075"
"한의원","대우한의원","전라남도 순천시 순광로 149, 2층 (장천동)","061-741-1075"
"한의원","정문한의원","전라남도 순천시 중앙로 171, 2층 (중앙동)","061-744-1075"
"한의원","김영춘한의원","전라남도 순천시 중앙로 214, 2층 (중앙동)","061-741-1075"
"한의원","김성환한의원","전라남도 순천시 삼산로 175, 2층 (연향동)","061-725-2805"
"의원","순천센텀병원의원","전라남도 순천시 중앙로 225, 201호 (남내동)","061-900-3300"
"의원","연세연합의원","전라남도 순천시 팔마로 172, 2,3층 (조례동)","061-722-1275"
"의원","정호석의원","전라남도 순천시 충효로 132, 2층 (조례동)","061-721-7975"
"의원","광제한방내과의원","전라남도 순천시 연향번영길 145, 1층 (연향동)","061-722-7799"
"의원","미소의원","전라남도 순천시 연향번영길 103, 2층 (연향동)","061-721-1225"
"의원","허준의원","전라남도 순천시 연향번영길 174, 1층 (연향동)","061-723-1110"
"의원","푸른안과의원","전라남도 순천시 연향번영길 178, 2층 (연향동)","061-725-2000"
"의원","참조은정형외과의원","전라남도 순천시 연향번영길 202, 2층 (연향동)","061-721-7582"
"의원","연향탑안과의원","전라남도 순천시 연향번영1길 2, 3층 (연향동)","061-722-9000"
"의원","하나의원","전라남도 순천시 팔마로 26, 1층 (풍덕동)","061-746-1075"
"의원","새생명의원","전라남도 순천시 팔마로 28, 2층 (풍덕동)","061-743-1075"
"의원","튼튼통증의학과의원","전라남도 순천시 삼산로 22, 101, 201호 (저전동)","061-754-5275"
"의원","순천한의원","전라남도 순천시 조례못등길 23, 102호 (조례동)","061-725-2882"
"의원","순천연합의원","전라남도 순천시 삼산로 109, 2층 (용당동)","061-753-2775"
"의원","해오름의원","전라남도 순천시 삼산로 133, 1층 (용당동)","061-755-1075"
"의원","이정수의원","전라남도 순천시 삼산로 149, 1층 (용당동)","061-752-1075"
"의원","정수의원","전라남도 순천시 팔마로 280, 1층 (조례동)","061-721-7575"
"의원","김인수이비인후과의원","전라남도 순천시 팔마로 290, 2층 (조례동)","061-721-1075"
"의원","최선이비인후과의원","전라남도 순천시 팔마로 315, 2층 (연향동)","061-723-1075"
"의원","송재석의원","전라남도 순천시 연향번영길 98, 2층 (연향동)","061-725-7227"
"의원","서울안과의원","전라남도 순천시 연향3로 20, 2층 (연향동)","061-724-1075"
"의원","순천연향정형외과의원","전라남도 순천시 연향3로 22, 2층 (연향동)","061-723-2330"
"의원","서울안과의원","전라남도 순천시 연향1로 25, 2층 (연향동)","061-725-1075"
"의원","서울안과의원","전라남도 순천시 연향1로 25, 3층 (연향동)","061-725-1075"
"의원","순천연향이비인후과의원","전라남도 순천시 연향1로 37, 2층 (연향동)","061-724-1075"
"의원","순천제일의원","전라남도 순천시 연향1로 37, 3층 (연향동)","061-725-1075"
"의원","명안과의원","전라남도 순천시 연향번영1길 20, 2층 (연향동)","061-724-1075"
"의원","중앙정형외과의원","전라남도 순천시 연향번영1길 16, 2층 (연향동)","061-723-1075"
"의원","순천연합의원","전라남도 순천시 순광로 122, 3층 (장천동)","061-744-1075"
"의원","김영춘소아과의원","전라남도 순천시 중앙로 214, 1층 (중앙동)","061-743-1075"
"의원","허정윤이비인후과의원","전라남도 순천시 중앙로 256, 2층 (남내동)","061-742-1075"
"의원","김치과의원","전라남도 순천시 연향2로 12, 1층 (연향동)","061-722-1075"
"의원","늘푸른정형외과의원","전라남도 순천시 연향3로 5, 1층 (연향동)","061-723-1075"
"의원","순천연합의원","전라남도 순천시 백강로 439, 2층 (조례동)","061-722-1075"
"의원","김영조내과의원","전라남도 순천시 충효로 135, 1층 (조례동)","061-723-2882"
"의원","하나의원","전라남도 순천시 조례못등길 15, 101호 (조례동)","061-724-1075"
"의원","정소아과의원","전라남도 순천시 연향번영길 174, 2층 (연향동)","061-724-2828"
"의원","김승의원","전라남도 순천시 순광로 316, 1층 (연향동)","061-724-2828"
"의원","늘푸른정형외과의원","전라남도 순천시 해룡면 신대1길 6, 201호 (신대리)","061-721-7588"
"의원","박명준내과의원","전라남도 순천시 연향3로 16, 1층 (연향동)","061-721-2828"
"의원","김안과의원","전라남도 순천시 연향2로 11, 1층 (연향동)","061-723-2804"
"의원","늘사랑의원","전라남도 순천시 중앙로 171, 1층 (중앙동)","061-745-1075"
"의원","순천연합의원","전라남도 순천시 중앙로 353, 1층 (가곡동)","061-752-1075"
"의원","정형외과","전라남도 순천시 조례동 1735","061-727-2800"
"의원","김용성내과의원","전라남도 순천시 해룡면 매안2길 19, 1층","061-727-2800"
"의원","연세가정의학과의원","전라남도 순천시 해룡면 매안로 145, 1층 101호","061-725-7275"
"의원","새나의원","전라남도 순천시 해룡면 매안로 145, 2층 201호","061-724-1075"
"의원","안과의원","전라남도 순천시 연향동 1324-4","061-725-1075"
"의원","정형외과","전라남도 순천시 연향동 1414-2","061-724-7500"
"의원","정형외과","전라남도 순천시 조례동 1735","061-727-2800"
"치과의원","아름다운치과의원","전라남도 순천시 순광로 316, 2층 (연향동)","061-722-2875"
"치과의원","이사랑치과의원","전라남도 순천시 해룡면 장선배기길 272, 부영6차가동 2층 3,4호","061-725-2804"
"치과의원","프롬치과의원","전라남도 순천시 왕궁길 47, 2층 (조례동)","061-725-2775"
"치과의원","순천수치과의원","전라남도 순천시 중앙로 353, 2층 (가곡동)","061-752-6511"
"치과의원","박석환치과의원","전라남도 순천시 해룡면 장선배기길 284, 청솔@상가동 201호","061-725-2882"
"치과의원","라임치과의원","전라남도 순천시 이수로 321, 4층 (조례동)","061-721-2804"
"치과의원","스마일치과의원","전라남도 순천시 해룡면 기적의도서관길 90, 2층 212호 (부영3차아파트)","061-724-2828"
"치과의원","누가치과의원","전라남도 순천시 중앙로 74 (장천동)","061-744-9972"
"치과의원","최명준치과의원","전라남도 순천시 연향번영길 145, 203호 (연향동)","061-723-2875"
"치과의원","순천서울치과의원","전라남도 순천시 연향번영길 163, 2층 (연향동)","061-725-2800"
"치과의원","보강치과의원","전라남도 순천시 연향번영길 174, 3층 (연향동)","061-722-2875"
"치과의원","이사랑치과의원","전라남도 순천시 연향번영길 197, 2층 (연향동)","061-725-2800"
"치과의원","김철훈치과의원","전라남도 순천시 연향번영길 199, 2층 (연향동)","061-723-2875"
"치과의원","김병곤치과의원","전라남도 순천시 연향번영길 202, 3층 (연향동)","061-725-2804"
"치과의원","박선치과의원","전라남도 순천시 연향번영길 204, 2층 (연향동)","061-723-2800"
"치과의원","강치과의원","전라남도 순천시 조례못등길 23, 3층 (조례동)","061-725-2875"
"치과의원","정다운치과의원","전라남도 순천시 조례못등길 31, 2층 (조례동)","061-721-2800"
"치과의원","김철치과의원","전라남도 순천시 삼산로 115, 3층 (용당동)","061-754-2875"
"치과의원","미소치과의원","전라남도 순천시 삼산로 133, 3층 (용당동)","061-755-2804"
"치과의원","연세치과의원","전라남도 순천시 삼산로 189, 3층 (연향동)","061-722-2800"
"치과의원","바른손치과의원","전라남도 순천시 삼산로 225, 3층 (연향동)","061-723-2800"
"치과의원","박정수치과의원","전라남도 순천시 삼산로 379, 2층 (연향동)","061-722-2800"
"치과의원","최윤정치과의원","전라남도 순천시 충효로 151, 2층 (조례동)","061-725-2804"
"치과의원","김한나치과의원","전라남도 순천시 순광로 316, 3층 (연향동)","061-722-2828"
"치과의원","서울치과의원","전라남도 순천시 중앙로 214, 3층 (중앙동)","061-744-2828"
"치과의원","김상훈치과의원","전라남도 순천시 왕지2길 13-7, 3층 (왕지동)","061-722-2875"
"치과의원","장치과의원","전라남도 순천시 해룡면 신대1길 6, 401호 (신대리)","061-725-2882"
"치과의원","김경민치과의원","전라남도 순천시 연향번영1길 22, 2층 (연향동)","061-722-2800"
"치과의원","성지치과의원","전라남도 순천시 팔마로 24, 3층 (풍덕동)","061-745-2875"
"치과의원","김석찬치과의원","전라남도 순천시 조례못등길 15, 301호 (조례동)","061-724-2875"
"치과의원","박주성의원","전라남도 순천시 연향동 1324-4","061-725-1075"
"치과의원","정형외과","전라남도 순천시 연향동 1414-2","061-724-7500"
"치과의원","이선영치과의원","전라남도 순천시 팔마로 253, 3층 (조례동)","061-723-2800"
"치과의원","김성치과의원","전라남도 순천시 백강로 439, 3층 (조례동)","061-725-2804"
"치과의원","성지치과의원","전라남도 순천시 팔마로 24, 3층 (풍덕동)","061-745-2875"
"치과의원","김석찬치과의원","전라남도 순천시 조례못등길 15, 301호 (조례동)","061-724-2875"
"치과의원","박주성의원","전라남도 순천시 연향동 1324-4","061-725-1075"
"치과의원","정형외과","전라남도 순천시 연향동 1414-2","061-724-7500"
"치과의원","이선영치과의원","전라남도 순천시 팔마로 253, 3층 (조례동)","061-723-2800"
"치과의원","김성치과의원","전라남도 순천시 백강로 439, 3층 (조례동)","061-725-2804"
"치과의원","최명준치과의원","전라남도 순천시 연향번영길 145, 203호 (연향동)","061-723-2875"
"치과의원","순천서울치과의원","전라남도 순천시 연향번영길 163, 2층 (연향동)","061-725-2800"
"치과의원","보강치과의원","전라남도 순천시 연향번영길 174, 3층 (연향동)","061-722-2875"
"치과의원","이사랑치과의원","전라남도 순천시 연향번영길 197, 2층 (연향동)","061-725-2800"
"치과의원","김철훈치과의원","전라남도 순천시 연향번영길 199, 2층 (연향동)","061-723-2875"
"치과의원","김병곤치과의원","전라남도 순천시 연향번영길 202, 3층 (연향동)","061-725-2804"
"치과의원","박선치과의원","전라남도 순천시 연향번영길 204, 2층 (연향동)","061-723-2800"
"치과의원","강치과의원","전라남도 순천시 조례못등길 23, 3층 (조례동)","061-725-2875"
"치과의원","정다운치과의원","전라남도 순천시 조례못등길 31, 2층 (조례동)","061-721-2800"
"치과의원","김철치과의원","전라남도 순천시 삼산로 115, 3층 (용당동)","061-754-2875"
"치과의원","미소치과의원","전라남도 순천시 삼산로 133, 3층 (용당동)","061-755-2804"
"치과의원","연세치과의원","전라남도 순천시 삼산로 189, 3층 (연향동)","061-722-2800"
"치과의원","바른손치과의원","전라남도 순천시 삼산로 225, 3층 (연향동)","061-723-2800"
"치과의원","박정수치과의원","전라남도 순천시 삼산로 379, 2층 (연향동)","061-722-2800"
"치과의원","최윤정치과의원","전라남도 순천시 충효로 151, 2층 (조례동)","061-725-2804"
"치과의원","김한나치과의원","전라남도 순천시 순광로 316, 3층 (연향동)","061-722-2828"
"치과의원","서울치과의원","전라남도 순천시 중앙로 214, 3층 (중앙동)","061-744-2828"
"치과의원","김상훈치과의원","전라남도 순천시 왕지2길 13-7, 3층 (왕지동)","061-722-2875"
"치과의원","장치과의원","전라남도 순천시 해룡면 신대1길 6, 401호 (신대리)","061-725-2882"
"치과의원","김경민치과의원","전라남도 순천시 연향번영1길 22, 2층 (연향동)","061-722-2800"
"치과의원","성지치과의원","전라남도 순천시 팔마로 24, 3층 (풍덕동)","061-745-2875"
"치과의원","김석찬치과의원","전라남도 순천시 조례못등길 15, 301호 (조례동)","061-724-2875"
"치과의원","박주성의원","전라남도 순천시 연향동 1324-4","061-725-1075"
"치과의원","정형외과","전라남도 순천시 연향동 1414-2","061-724-7500"
"치과의원","이선영치과의원","전라남도 순천시 팔마로 253, 3층 (조례동)","061-723-2800"
"치과의원","김성치과의원","전라남도 순천시 백강로 439, 3층 (조례동)","061-725-2804"`;

        document.addEventListener('DOMContentLoaded', () => {
            const searchInput = document.getElementById('search-input');
            const typeFilter = document.getElementById('type-filter');
            const neighborhoodFilter = document.getElementById('neighborhood-filter');
            const tableBody = document.getElementById('hospital-table-body');
            const resultCountSpan = document.getElementById('result-count');

            if (!csvContent || csvContent.trim() === '') {
                tableBody.innerHTML = '<tr><td colspan="4" class="text-center text-red-500">파일 내용이 비어 있습니다.</td></tr>';
                console.error("CSV content is empty.");
                return;
            }

            // CSV 데이터 파싱
            function parseCsv(csv) {
                const lines = csv.trim().split('\n');
                const headers = lines[0].split(',').map(h => h.trim().replace(/"/g, ''));
                return lines.slice(1).map(line => {
                    const values = line.match(/(?:[^,"]+|"[^"]*")+/g).map(v => v.trim().replace(/"/g, ''));
                    const obj = {};
                    headers.forEach((header, i) => {
                        obj[header] = values[i];
                    });
                    
                    // 주소에서 "동" 정보 추출 (예: (왕지동) -> 왕지동)
                    const address = obj['의료기관주소(도로명)'];
                    const match = address.match(/\(([^)]+동)\)/);
                    obj['동'] = match ? match[1] : '';

                    return obj;
                });
            }

            let allData = parseCsv(csvContent);

            // 필터 드롭다운 메뉴 채우기
            function populateFilters() {
                const uniqueTypes = [...new Set(allData.map(item => item['구분']))].sort();
                uniqueTypes.forEach(type => {
                    const option = document.createElement('option');
                    option.value = type;
                    option.textContent = type;
                    typeFilter.appendChild(option);
                });

                const uniqueNeighborhoods = [...new Set(allData.map(item => item['동']))].sort();
                uniqueNeighborhoods.forEach(neighborhood => {
                    if (neighborhood) {
                        const option = document.createElement('option');
                        option.value = neighborhood;
                        option.textContent = neighborhood;
                        neighborhoodFilter.appendChild(option);
                    }
                });
            }

            // 테이블 렌더링
            function renderTable(data) {
                if (data.length === 0) {
                    tableBody.innerHTML = '<tr><td colspan="4" class="text-center text-gray-500 py-8">해당하는 의료기관이 없습니다.</td></tr>';
                } else {
                    const htmlContent = data.map(item => `
                        <tr class="hover:bg-gray-100 transition-colors duration-200">
                            <td>${item['구분']}</td>
                            <td>${item['의료기관명']}</td>
                            <td>${item['의료기관주소(도로명)']}</td>
                            <td>${item['의료기관전화번호'] || '정보 없음'}</td>
                        </tr>
                    `).join('');
                    tableBody.innerHTML = htmlContent;
                }
                resultCountSpan.textContent = `총 ${data.length}개 결과`;
            }

            // 데이터 필터링 및 검색
            function filterAndSearch() {
                const searchTerm = searchInput.value.toLowerCase();
                const selectedType = typeFilter.value;
                const selectedNeighborhood = neighborhoodFilter.value;

                const filteredData = allData.filter(item => {
                    const matchesSearch = (
                        (item['의료기관명'] && item['의료기관명'].toLowerCase().includes(searchTerm)) ||
                        (item['의료기관주소(도로명)'] && item['의료기관주소(도로명)'].toLowerCase().includes(searchTerm)) ||
                        (item['의료기관전화번호'] && item['의료기관전화번호'].toLowerCase().includes(searchTerm))
                    );
                    
                    const matchesType = selectedType === '' || item['구분'] === selectedType;
                    const matchesNeighborhood = selectedNeighborhood === '' || item['동'] === selectedNeighborhood;

                    return matchesSearch && matchesType && matchesNeighborhood;
                });

                renderTable(filteredData);
            }

            // 초기 로딩
            populateFilters();
            filterAndSearch();

            // 이벤트 리스너 추가
            searchInput.addEventListener('input', filterAndSearch);
            typeFilter.addEventListener('change', filterAndSearch);
            neighborhoodFilter.addEventListener('change', filterAndSearch);
        });
    </script>
</body>
</html>
